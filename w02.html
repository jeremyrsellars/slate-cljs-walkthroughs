<html><head><meta charSet="utf-8"/><title>02 Event handlers - Slate with ClojureScript</title><link rel="stylesheet" href="css/style.css?Rel=20200504_091031"/></head><body><h1 class="title">Slate with ClojureScript</h1><div id="app"><div><h1>02 Event handlers</h1><div class="objective">Use an event handler to implement custom behavior.<span><br/>  Follow along with <a href="https://docs.slatejs.org/walkthroughs/02-adding-event-handlers" class="slate-tutorial" target="tutorial">Slate tutorial 02 Event handlers</a> (JavaScript).</span></div><h3>Interactive Demo</h3><p class="description">Automatically replace &#x27;&amp;&#x27; with &#x27;and&#x27; when you type it.</p><div id="editor-parent"><div data-gramm="false" role="textbox" data-slate-editor="true" data-slate-node="value" contenteditable="true" style="outline:none;white-space:pre-wrap;word-wrap:break-word"><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span data-slate-leaf="true"><span data-slate-string="true">A line of text in a paragraph.</span></span></span></div></div></div><div id="source"><h3>ClojureScript</h3><pre><code class="language-clojure">(defn App
  []
  (let [editor (useMemo #(withReact (createEditor))
                       #js [])
        ; Add the initial value when setting up our state.
        [value setValue]
        (useState
         #js [#js {:type &quot;paragraph&quot;
                   :children
                   #js [#js {:text &quot;A line of text in a paragraph.&quot;}]}])]
    (createElement Slate
      #js {:editor editor
           :value value
           :onChange #(setValue %)}
      (createElement Editable
        #js{:onKeyDown
            (fn onKeyDown [event]
              ; (js/console.log (.-key event)
              (when (= (.-key event) &quot;&amp;&quot;)
                ; Prevent the ampersand character from being inserted.
                (.preventDefault event) 
                ; Execute the `insertText` method when the event occurs.
                (.insertText editor &quot;and&quot;)))}))))
</code></pre><h3>JavaScript (from Slate Tutorial)</h3><pre><code class="language-javascript">  //From slatecljs.slate-02-event-handlers/App ([])
  const App = () =&gt; {
  const editor = useMemo(() =&gt; withReact(createEditor()), [])
  const [value, setValue] = useState([
    {
      type: &#x27;paragraph&#x27;,
      children: [{ text: &#x27;A line of text in a paragraph.&#x27; }],
    },
  ])

  return (
    &lt;Slate editor={editor} value={value} onChange={value =&gt; setValue(value)}&gt;
      &lt;Editable
        onKeyDown={event =&gt; {
          if (event.key === &#x27;&amp;&#x27;) {
            // Prevent the ampersand character from being inserted.
            event.preventDefault()
            // Execute the `insertText` method when the event occurs.
            editor.insertText(&#x27;and&#x27;)
          }
        }}
      /&gt;
    &lt;/Slate&gt;
  )
}
</code></pre></div><h3>Where to next?</h3><ul id="nav"><li class="next"><a href="w03.html#w03" class="next">03 Defining custom elements</a></li><li class="slate-tutorial"><a href="https://docs.slatejs.org/walkthroughs/02-adding-event-handlers" class="slate-tutorial" target="tutorial">02 Event handlers</a></li><li class="source-link"><a href="https://github.com/jeremyrsellars/slate-cljs-walkthroughs/blob/master/src/slatecljs/slate_02_event_handlers.cljs#L11" class="source-link">&lt;App&gt;</a></li><li class="previous"><a href="w01.html#w01" class="previous">01 Installing slate</a></li></ul></div></div><script>window.location.hash = "w02";</script><script src="cljs-out/dev-main.js?Rel=20200504_091031"></script><link rel="stylesheet" href="highlightjs/styles/obsidian.css?Rel=20200504_091031"/><script src="highlightjs/highlight.pack.js?Rel=20200504_091031"></script><script>slatecljs.common.highlight_source("force");</script><div>You might also like this <a href="https://jeremyrsellars.github.io/no-new-legacy/posts/2018-09-07-generative-testing-introduction/">blog about generative testing in Clojure</a> also by <a href="https://jeremyrsellars.github.io/">Jeremy Sellars</a>.</div></body></html>
